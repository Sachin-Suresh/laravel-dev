# Understanding the Kstych Framework

<font color='#7540EE'>

1. [Introduction](#introduction)
1. [Comparing Kstych and Laravel Directory Structure](#comparing-kstych-and-laravel-directory-structure)
1. [Platform Specific Classes in Kstych](#platform-specific-classes-in-kstych)
1. [Next Steps](#next-steps)

</font>
- - - -

## Introduction

The Kstych directory structure is inherited from the Laravel application structure, but works based on the single-line command that is executed from the `kstych.sh` shell script file. When you run the `kstych.sh` file that is located within the `framework` directory, the following actions take place:

- The folders `data/custom`, `data/var/lib/mysql`, and `data/etc/letsencrypt` are created in the root directory, i.e., `data` directory.

- The following snippet from the `kstych.sh` script checks if the container that you are running is *podman* or *docker*:

```
COMMAND="podman"
if ! command -v $COMMAND &> /dev/null
then
    COMMAND="docker"
fi
```

- The following single-line command from the script file executes the docker container.

```
$COMMAND run --rm -it --shm-size=2gb \
                --network=kstych-framework \
                --name=kstych-framework \
                -v `pwd`/data/var/lib/mysql:/var/lib/mysql:Z \
                -v `pwd`/data/custom:/home/Kstych/Framework/custom:Z \
                -v `pwd`/data/etc/letsencrypt:/etc/letsencrypt:Z \
                -p 80:80 -p 443:443 \
                -e KSTYCH_LICENSE="$ARG1" -e KSTYCH_DOMAIN="$ARG2" -e KSTYCH_IP="$ARG3" \
      kstych/framework
```

## Comparing Kstych and Laravel Directory Structure

You can learn more about the [Laravel directory structure](https://laravel.com/docs/8.x/structure) before understanding the Kstych directory structure.

The root directory, i.e., the `data` directory created by the `kstych.sh` script file contains all application data and files in the `custom`, `etc`, and `var` directories that require persistence.

The following tree structure gives an overview of the different directories and sub-directories in the Kstych framework and how it can be compared with the Laravel application structure.

    ðŸ“¦data                             : Root directory
    â”£ ðŸ“‚custom                         : Contains code, configurations & any file uploads
    â”ƒ â”£ ðŸ“‚app                          : Comparable to Laravel `storage/app` directory
    â”ƒ â”ƒ â”£ ðŸ“‚public                     : Comparable to Laravel `storage/app/public` folder
    â”ƒ â”ƒ â”— ðŸ“‚temp                       : Directory used by the application to manage temporary files
    â”ƒ â”ƒ â”ƒ â”£ ðŸ“œkstych-localhost.sh      : Kstych localhost script file
    â”ƒ â”ƒ â”ƒ â”£ ðŸ“œoauth-private.key        : The OAuth private key file
    â”ƒ â”ƒ â”ƒ â”— ðŸ“œoauth-public.key         : The OAuth public key file
    â”ƒ â”£ ðŸ“‚ext                          : Contains custom code extensions
    â”ƒ â”ƒ â”£ ðŸ“‚assets                     : Directory mapped to `/public/custom/*`
    â”ƒ â”ƒ â”£ ðŸ“‚config                     : Custom directory containing Kstych framework configuration files
    â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚lang                     : Contains the framework language files
    â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚models                   : Contains the model configuration files generated by the framework
    â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚modules                  : Contains application module definitions generated by the framework
    â”ƒ â”ƒ â”ƒ â”£ ðŸ“‚seed                     : Seed data auto generated from database CRUD operations (if configured)
    â”ƒ â”ƒ â”ƒ â”— ðŸ“œapp.php
    â”ƒ â”ƒ â”£ ðŸ“‚packages                   : Comparable to Laravel namespace App/Custom
    â”ƒ â”ƒ â”£ ðŸ“‚tests                      : Contains custom test files for the application
    â”ƒ â”ƒ â”— ðŸ“‚views                      : Comparable to Laravel `resources/views/custom` directory
    â”ƒ â”£ ðŸ“œ.env
    â”ƒ â”— ðŸ“œ.gitignore
    â”£ ðŸ“‚etc                            : Used to store SSL certificates
    â”ƒ â”— ðŸ“‚letsencrypt                  : Stores https certificates if configured
    â”£ ðŸ“‚var                            : Stores the MySQL data files & directories
    â”ƒ â”£ ðŸ“‚lib                          : Contains the dynamic data library files
    â”ƒ â”ƒ â”£ ðŸ“‚mysql                      : Contains the MariaDB data files

<img src="../markups/migrate-info-markup.svg">

> If you need to access the core Laravel code files within the Kstych framework, you can access them from the docker image.
>
> 1. Navigate to **Admin**-> **Designer** menu.
> 1. Click **Commands** option on the left pane, and click the terminal icon.

> <img src="../images/core-laravel.png"/>

## Platform Specific Classes in Kstych

Content here...

## Next Steps

Content here...